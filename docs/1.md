Phase 1 â€” å¾…å®Œå–„ï¼ˆå…ˆåšå¥½è¿™ä»¶äº‹ï¼‰
ğŸ”´ æ­£ç¡®æ€§é—®é¢˜ï¼ˆä¼šäº§ç”Ÿé”™è¯¯è¡Œä¸ºï¼‰
1. _initiate_internal_meeting god-view æœªä¿®æ­£

ç°åœ¨çº¯å†…éƒ¨ä¼šè®®ä»åœ¨ç›´æ¥ auto-confirmï¼šæŠŠ config åå¥½å½“çœŸå®å¯ç”¨æ€§ï¼Œç›´æ¥ apply_vote å¹¶ status = "confirmed"ã€‚è¿™å’Œæˆ‘ä»¬è®¨è®ºçš„ç»“è®ºçŸ›ç›¾â€”â€”config åå¥½åº”è¯¥åªç”Ÿæˆå€™é€‰é€‰é¡¹ï¼Œç„¶åç»™æ‰€æœ‰å†…éƒ¨æˆå‘˜å‘æŠ•ç¥¨é‚€è¯·ï¼Œç­‰å®é™…å›å¤ã€‚

2. é‚®ä»¶ä¸»é¢˜æœªä¼ å…¥ handle_member_command

poll() åªä¼ äº† parsed.bodyï¼Œä¸»é¢˜é‡Œå¯èƒ½æœ‰æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚æˆå‘˜åœ¨ä¸»é¢˜é‡Œå†™äº†ä¼šè®®ä¸»é¢˜ï¼‰ã€‚åº”è¯¥æŠŠ parsed.subject ä¹Ÿä¼ è¿›å»ï¼Œè®© LLM åœ¨ body+subject é‡Œä¸€èµ·æå–ã€‚

ğŸŸ¡ å¥å£®æ€§é—®é¢˜ï¼ˆä¼šåœ¨ç”Ÿäº§ç¯å¢ƒå‡ºé”™ï¼‰
3. é‚®ä»¶å¾ªç¯ / spam é£é™©

_reply_unknown_sender å¯¹æ¯å°é™Œç”Ÿé‚®ä»¶éƒ½å›å¤ï¼ŒåŒ…æ‹¬ï¼š

é€€ä¿¡ï¼ˆbounce mailï¼‰
no-reply@ åœ°å€
å…¶ä»–è‡ªåŠ¨å›å¤
éœ€è¦æ£€æŸ¥ï¼šAuto-Submitted å¤´ã€List-* å¤´ã€å‘ä»¶äººæ˜¯å¦åŒ…å« no-reply/noreply/mailer-daemonã€‚

4. _reply_unknown_sender æ— èŠ‚æµ

åŒä¸€ä¸ªé™Œç”Ÿå‘ä»¶äººåå¤å‘é‚®ä»¶ â†’ Hub åå¤å›å¤æ³¨å†Œå¼•å¯¼ã€‚éœ€è¦ä¸€ä¸ªç®€å•çš„å†…å­˜é›†åˆï¼ˆæˆ– TTL ç¼“å­˜ï¼‰è®°å½•ã€Œå·²å›å¤çš„é™Œç”Ÿåœ°å€ã€ï¼ŒåŒä¸€åœ°å€ N å°æ—¶å†…åªå›å¤ä¸€æ¬¡ã€‚

5. fetch_all_unread_emails ä¸çˆ¶ç±» fetch_aimp_emails çš„ç«äº‰

çˆ¶ç±» poll() ä¼šæŠŠ [AIMP:] é‚®ä»¶æ ‡è®°å·²è¯»ï¼Œç„¶å Hub å† fetch_all_unread_emailsã€‚æ—¶åºä¸Šåº”è¯¥æ˜¯å®‰å…¨çš„ï¼Œä½† IMAP æ ‡è®°å’Œä¸‹ä¸€æ¬¡ SEARCH ä¹‹é—´æœ‰çª—å£æœŸâ€”â€”é«˜å¹¶å‘ä¸‹å¯èƒ½åŒé‡å¤„ç†ã€‚éœ€è¦ç¡®è®¤ fetch_all_unread_emails çœŸçš„è·³è¿‡äº†å·²è¯»é‚®ä»¶ï¼ˆçœ‹ IMAP SEARCH æ¡ä»¶æ˜¯å¦åŠ äº† UNSEENï¼‰ã€‚

ğŸŸ¢ ä½“éªŒå®Œå–„ï¼ˆåšäº†æ›´å¥½ï¼‰
6. å¯åŠ¨æ—¶ config æ ¡éªŒ

AIMPHubAgent.__init__ é‡ŒåŠ ä¸€ä¸ª _validate_config() æ–¹æ³•ï¼Œæ£€æŸ¥å¿…å¡«å­—æ®µï¼ˆhub.emailã€hub.imap_serverã€è‡³å°‘ä¸€ä¸ª memberï¼‰ï¼Œå¯åŠ¨æ—¶æŠ¥æ˜ç¡®é”™è¯¯ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ KeyErrorã€‚

7. æ ¸å¿ƒè·¯å¾„å•æµ‹

è‡³å°‘è¦†ç›–ï¼š

_validate_invite_codeï¼ˆè¿‡æœŸ/è¶…é™/ä¸å­˜åœ¨ï¼‰
_find_participant_contactï¼ˆmember/contact/è£¸é‚®ç®±ä¸‰è·¯ï¼‰
_check_invite_emailï¼ˆæœ‰ç /æ— ç ï¼‰
_parse_member_request çš„ mock LLM åœºæ™¯
Phase 2 â€” The Roomï¼ˆåšå®Œ Phase 1 ä¹‹åï¼‰
æŒ‰ä¾èµ–é¡ºåºï¼š


1. Artifact æ•°æ®ç»“æ„
   â””â”€ Artifact dataclass: {name, content_type, body_text, author, timestamp}
   â””â”€ æœ€å° schemaï¼Œè·¨ Agent äº’æ“ä½œå‰æ

2. AIMPRoom æ‰©å±• AIMPSession
   â””â”€ æ–°å¢: deadline, artifacts, transcript
   â””â”€ çŠ¶æ€æœº: negotiating â†’ open â†’ locked â†’ finalized

3. CFP é‚®ä»¶ï¼ˆCall for Participationï¼‰
   â””â”€ æ–°é‚®ä»¶å¤´: X-AIMP-Phase: 2, X-AIMP-Deadline
   â””â”€ Deadline + å†³è®®è§„åˆ™åœ¨ CFP é‡Œå£°æ˜ï¼ˆä¸æ˜¯ Hub äº‹åæ‹æ¿ï¼‰

4. Timeout å¼ºåˆ¶æ”¶æ•›é€»è¾‘
   â””â”€ Hub poll() é‡Œçš„ deadline æ£€æŸ¥
   â””â”€ æŒ‰ CFP å£°æ˜çš„è§„åˆ™å‡ºç»“æœï¼ˆå¤šæ•°ç¥¨ or æœ€è¿‘å…±è¯† or escalateï¼‰

5. ä¼šè®®çºªè¦ç”Ÿæˆ
   â””â”€ generate_meeting_minutes(room: AIMPRoom) â†’ str
   â””â”€ å‘ç»™æ‰€æœ‰ human å‚ä¸è€…

6. Human veto æµç¨‹
   â””â”€ çºªè¦é‚®ä»¶å¯å›å¤ Confirm / Reject
   â””â”€ Reject åæ˜ç¡®è¡Œä¸ºï¼šre-open or escalateï¼ˆäºŒé€‰ä¸€ï¼Œå…ˆå®šå¥½ï¼‰
å»ºè®®é¡ºåº

æœ¬å‘¨ï¼šä¿®æ­£ç¡®æ€§é—®é¢˜ï¼ˆ1+2ï¼‰ â†’ åŠ å¥å£®æ€§ï¼ˆ3+4ï¼‰ â†’ åŠ  config æ ¡éªŒï¼ˆ6ï¼‰
ä¸‹å‘¨ï¼šå†™å•æµ‹ï¼ˆ7ï¼‰
ä¹‹åï¼šPhase 2ï¼Œä» Artifact æ•°æ®ç»“æ„å¼€å§‹